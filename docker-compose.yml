services:
  vector-db:
    image: qdrant/qdrant:latest
    container_name: wellness-vector
    restart: unless-stopped
    ports:
      - "6333:6333"
    volumes:
      - ./data/vector:/qdrant/storage
  backend:
    build: ./backend
    container_name: wellness-backend
    restart: unless-stopped
    env_file:
      - ./backend/.env
    environment:
      - VECTOR_DB_URL=http://vector-db:6333
      - VECTOR_DB_COLLECTION=recipes
      - FRONTEND_URL=http://localhost:4173
    depends_on:
      - vector-db
    ports:
      - "4000:4000"
  frontend:
    build: ./frontend
    container_name: wellness-frontend
    restart: unless-stopped
    environment:
      - VITE_BACKEND_URL=http://localhost:4000
    ports:
      - "4173:80"
    depends_on:
      - backend
